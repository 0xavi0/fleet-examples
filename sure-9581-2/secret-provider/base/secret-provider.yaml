apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: vault-cert-manager
  namespace: cert-manager
spec:
  provider: vault
  secretObjects:
  - secretName: vault-cert-manager-secrets
    type: Opaque
    data:
    - objectName: nonprod-hydrant
      key: secret
    - objectName: nonprod-cloudflare
      key: cloudflare_token
  parameters:
    roleName: cert-manager
    vaultAddress: https://pwvault.dev.identrust.com
    vaultKubernetesMountPath: replace
    objects: | 
      - objectName: "nonprod-hydrant"
        secretPath: "kv-v2/data/cert-manager/replace/acm"
        secretKey: "secret"
      - objectName: "nonprod-cloudflare"
        secretPath: "kv-v2/data/cert-manager/replace/acm"
        secretKey: "cloudflare_token"
